# å¿«é€Ÿå‚è€ƒï¼šåŒæ–‡ä»¶å¤¹éƒ¨ç½²

## ğŸ“ ä¸¤ä¸ªæ–‡ä»¶å¤¹

| æ–‡ä»¶å¤¹ | è·¯å¾„ | ç”¨é€” | æƒé™ |
|--------|------|------|------|
| **æ›´æ–°æ–‡ä»¶å¤¹** | `~/Desktop/Github/RaspiOwnCloud/` | Gitæ“ä½œã€ä»£ç æ›´æ–° | piç”¨æˆ· |
| **ç”Ÿäº§æ–‡ä»¶å¤¹** | `/opt/raspberrycloud/` | æœåŠ¡è¿è¡Œ | www-data |

## ğŸš€ é¦–æ¬¡éƒ¨ç½²ï¼ˆ3æ­¥ï¼‰

```bash
# 1. å…‹éš†åˆ°æ›´æ–°æ–‡ä»¶å¤¹
mkdir -p ~/Desktop/Github && cd ~/Desktop/Github
git clone https://github.com/lyf-workshop/RaspiOwnCloud.git
cd RaspiOwnCloud

# 2. è¿è¡Œåˆå§‹éƒ¨ç½²
sudo bash scripts/initial_deploy.sh

# 3. é…ç½®ç¯å¢ƒå˜é‡
sudo nano /opt/raspberrycloud/backend/.env
```

## ğŸ”„ æ—¥å¸¸æ›´æ–°ï¼ˆ2æ­¥ï¼‰

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç åˆ°æ›´æ–°æ–‡ä»¶å¤¹
cd ~/Desktop/Github/RaspiOwnCloud
git pull origin main

# 2. å¿«é€Ÿéƒ¨ç½²åˆ°ç”Ÿäº§æ–‡ä»¶å¤¹
bash scripts/quick_update.sh
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†
```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start raspberrycloud

# åœæ­¢æœåŠ¡
sudo systemctl stop raspberrycloud

# é‡å¯æœåŠ¡
sudo systemctl restart raspberrycloud

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status raspberrycloud

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u raspberrycloud -f
```

### æŸ¥çœ‹ç‰ˆæœ¬
```bash
# æ›´æ–°æ–‡ä»¶å¤¹ç‰ˆæœ¬
cd ~/Desktop/Github/RaspiOwnCloud && git log -1

# ç”Ÿäº§æ–‡ä»¶å¤¹æ–‡ä»¶æ—¶é—´
ls -lt /opt/raspberrycloud/backend/main.py
```

### å¤‡ä»½æ•°æ®
```bash
# å¤‡ä»½æ•´ä¸ªç”Ÿäº§ç›®å½•
sudo cp -r /opt/raspberrycloud /opt/raspberrycloud_backup_$(date +%Y%m%d)

# ä»…å¤‡ä»½æ•°æ®åº“
sudo cp /opt/raspberrycloud/backend/raspberrycloud.db ~/backup_$(date +%Y%m%d).db
```

## âš ï¸ é‡è¦æç¤º

### âœ… åº”è¯¥åšçš„
- åœ¨**æ›´æ–°æ–‡ä»¶å¤¹**ä½¿ç”¨Gitå‘½ä»¤
- åœ¨**æ›´æ–°æ–‡ä»¶å¤¹**ä¿®æ”¹ä»£ç 
- ä½¿ç”¨è„šæœ¬éƒ¨ç½²åˆ°ç”Ÿäº§æ–‡ä»¶å¤¹

### âŒ ä¸åº”è¯¥åšçš„
- åœ¨ç”Ÿäº§æ–‡ä»¶å¤¹ä½¿ç”¨Gitå‘½ä»¤
- ç›´æ¥ä¿®æ”¹ç”Ÿäº§æ–‡ä»¶å¤¹çš„ä»£ç 
- æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶ï¼ˆä½¿ç”¨è„šæœ¬ï¼‰

## ğŸ”§ ä¸‰ä¸ªéƒ¨ç½²è„šæœ¬

| è„šæœ¬ | ç”¨é€” | ä½•æ—¶ä½¿ç”¨ |
|------|------|----------|
| `initial_deploy.sh` | åˆå§‹éƒ¨ç½² | é¦–æ¬¡éƒ¨ç½² |
| `quick_update.sh` | å¿«é€Ÿæ›´æ–° | æ—¥å¸¸æ›´æ–°ï¼ˆæ¨èï¼‰ |
| `update_from_github.sh` | å®Œæ•´æ›´æ–° | é‡å¤§æ›´æ–°ã€éœ€è¦å¤‡ä»½æ—¶ |

## ğŸ“Š å·¥ä½œæµç¨‹å›¾

```
å¼€å‘/æ›´æ–°é˜¶æ®µ          éƒ¨ç½²é˜¶æ®µ           è¿è¡Œé˜¶æ®µ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ›´æ–°æ–‡ä»¶å¤¹            éƒ¨ç½²è„šæœ¬          ç”Ÿäº§æ–‡ä»¶å¤¹
    â”‚                   â”‚                 â”‚
    â”‚ git pull          â”‚                 â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
    â”‚                   â”‚ å¤åˆ¶æ–‡ä»¶         â”‚
    â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                   â”‚ é‡å¯æœåŠ¡         â”‚
    â”‚                   â”‚                 â”‚ systemd
    â”‚                   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€> è¿è¡Œ
    â”‚                   â”‚                 â”‚
```

## ğŸ†˜ å¿«é€Ÿæ•…éšœæ’æŸ¥

### æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u raspberrycloud -n 50

# æ£€æŸ¥é…ç½®
sudo nano /opt/raspberrycloud/backend/.env

# ä¿®å¤æƒé™
sudo chown -R www-data:www-data /opt/raspberrycloud
```

### æ›´æ–°åå¼‚å¸¸
```bash
# å›æ»šåˆ°å¤‡ä»½
sudo systemctl stop raspberrycloud
sudo cp -r /opt/raspberrycloud_backup_YYYYMMDD/* /opt/raspberrycloud/
sudo systemctl start raspberrycloud
```

### æ‰¾ä¸åˆ°æ›´æ–°æ–‡ä»¶å¤¹
```bash
# é‡æ–°å…‹éš†
mkdir -p ~/Desktop/Github
cd ~/Desktop/Github
git clone https://github.com/lyf-workshop/RaspiOwnCloud.git
```

## ğŸ“š è¯¦ç»†æ–‡æ¡£

å®Œæ•´è¯´æ˜è¯·æŸ¥çœ‹ï¼š[åŒæ–‡ä»¶å¤¹éƒ¨ç½²æ¶æ„è¯´æ˜](åŒæ–‡ä»¶å¤¹éƒ¨ç½²æ¶æ„è¯´æ˜.md)


