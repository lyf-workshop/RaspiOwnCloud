# ğŸ” æ›´æ–°é—®é¢˜æ’æŸ¥å®Œæˆï¼

## ğŸ“Š è¯Šæ–­ç»“æœ

### âœ… Windowsç«¯çŠ¶æ€ï¼šæ­£å¸¸
- æ‰€æœ‰æ–°æ–‡ä»¶å·²å­˜åœ¨ï¼š
  - `frontend/js/batch-operations.js`
  - `frontend/js/drag-upload.js`
  - `frontend/js/grid-view.js`
  - `frontend/js/qrcode-share.js`
  - `frontend/js/user-settings.js`
- æ–‡ä»¶å·²è¢«Gitè·Ÿè¸ª

### â“ å¯èƒ½çš„é—®é¢˜

#### é—®é¢˜1ï¼šWindowsç«¯ä»£ç æœªæ¨é€åˆ°GitHub
**æ£€æŸ¥æ–¹æ³•**ï¼š
```powershell
cd F:\Github\RaspiOwnCloud
git status
git log -1
```

**è§£å†³æ–¹æ³•**ï¼š
```powershell
# å¦‚æœæœ‰æœªæäº¤çš„æ–‡ä»¶
git add .
git commit -m "æ–°å¢4å¤§åŠŸèƒ½+ä¸ªäººä¸­å¿ƒ"
git push origin main
```

#### é—®é¢˜2ï¼šæ ‘è“æ´¾æœªæ‹‰å–æœ€æ–°ä»£ç 
**è¿™æ˜¯æœ€å¯èƒ½çš„åŸå› ï¼**

æ ‘è“æ´¾çš„æ›´æ–°æ–‡ä»¶å¤¹å¯èƒ½æ²¡æœ‰ä»GitHubæ‹‰å–æœ€æ–°ä»£ç ã€‚

---

## ğŸš€ æ­£ç¡®çš„æ›´æ–°æµç¨‹

### æ­¥éª¤1ï¼šWindowsç«¯ - ç¡®ä¿ä»£ç å·²æ¨é€
```powershell
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd F:\Github\RaspiOwnCloud

# 2. æŸ¥çœ‹çŠ¶æ€
git status

# 3. å¦‚æœæœ‰ä¿®æ”¹ï¼Œæäº¤å¹¶æ¨é€
git add .
git commit -m "æ–°å¢æ‰€æœ‰åŠŸèƒ½"
git push origin main

# 4. ç¡®è®¤æ¨é€æˆåŠŸ
git log -1
```

### æ­¥éª¤2ï¼šæ ‘è“æ´¾ - è¿è¡Œè¯Šæ–­è„šæœ¬
```bash
# SSHç™»å½•æ ‘è“æ´¾
ssh pi@raspberrypi.local

# è¿›å…¥æ›´æ–°æ–‡ä»¶å¤¹
cd ~/Desktop/Github/RaspiOwnCloud

# è¿è¡Œè¯Šæ–­è„šæœ¬
bash scripts/diagnose_update.sh
```

è¿™ä¸ªè„šæœ¬ä¼šå‘Šè¯‰ä½ ï¼š
- âœ… å“ªäº›æ–‡ä»¶å·²æ›´æ–°
- âŒ å“ªäº›æ–‡ä»¶ç¼ºå¤±
- ğŸ“Š æ›´æ–°æ–‡ä»¶å¤¹ vs ç”Ÿäº§æ–‡ä»¶å¤¹çš„çŠ¶æ€

### æ­¥éª¤3ï¼šæ ‘è“æ´¾ - è¿è¡Œæ›´æ–°è„šæœ¬
```bash
# ç¡®ä¿åœ¨æ›´æ–°æ–‡ä»¶å¤¹
cd ~/Desktop/Github/RaspiOwnCloud

# è¿è¡Œæ›´æ–°è„šæœ¬
bash scripts/quick_update.sh
```

### æ­¥éª¤4ï¼šéªŒè¯æ›´æ–°
```bash
# æ£€æŸ¥æ–°æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -lh /var/www/raspberrycloud/js/user-settings.js
ls -lh /var/www/raspberrycloud/js/batch-operations.js
ls -lh /var/www/raspberrycloud/js/drag-upload.js
ls -lh /var/www/raspberrycloud/js/grid-view.js
ls -lh /var/www/raspberrycloud/js/qrcode-share.js

# æ£€æŸ¥index.htmlæ˜¯å¦åŒ…å«æ–°æ¨¡å—
grep "user-settings.js" /var/www/raspberrycloud/index.html
```

å¦‚æœçœ‹åˆ°æ–‡ä»¶å’Œå¼•ç”¨ï¼Œè¯´æ˜æ›´æ–°æˆåŠŸï¼

### æ­¥éª¤5ï¼šæµè§ˆå™¨ - å¼ºåˆ¶åˆ·æ–°
```
Windows: Ctrl + Shift + Delete â†’ æ¸…é™¤ç¼“å­˜
æˆ–ï¼šCtrl + F5 ç¡¬åˆ·æ–°

Mac: Cmd + Shift + Delete â†’ æ¸…é™¤ç¼“å­˜
æˆ–ï¼šCmd + Shift + R ç¡¬åˆ·æ–°
```

---

## ğŸ”§ å¦‚æœè¯Šæ–­è„šæœ¬æ˜¾ç¤ºæ–‡ä»¶ç¼ºå¤±

### æƒ…å†µAï¼šæ›´æ–°æ–‡ä»¶å¤¹æ²¡æœ‰æ–°æ–‡ä»¶
**åŸå› **ï¼šGitHubä»“åº“æ²¡æœ‰æœ€æ–°ä»£ç 

**è§£å†³**ï¼š
1. åœ¨Windowsç«¯ç¡®è®¤æ¨é€æˆåŠŸ
2. åœ¨æ ‘è“æ´¾ä¸Šå¼ºåˆ¶æ‹‰å–ï¼š
```bash
cd ~/Desktop/Github/RaspiOwnCloud
git fetch origin
git reset --hard origin/main
```

### æƒ…å†µBï¼šç”Ÿäº§æ–‡ä»¶å¤¹æ²¡æœ‰æ–°æ–‡ä»¶
**åŸå› **ï¼šæ›´æ–°è„šæœ¬æ²¡æœ‰æ­£ç¡®å¤åˆ¶æ–‡ä»¶

**è§£å†³**ï¼š
```bash
# æ‰‹åŠ¨å¤åˆ¶
cd ~/Desktop/Github/RaspiOwnCloud
sudo cp -r frontend/* /var/www/raspberrycloud/
sudo chown -R www-data:www-data /var/www/raspberrycloud
sudo systemctl restart raspberrycloud
```

---

## ğŸ“ å®Œæ•´çš„ä¸€é”®æ›´æ–°å‘½ä»¤

### åœ¨æ ‘è“æ´¾ä¸Šæ‰§è¡Œï¼š
```bash
cd ~/Desktop/Github/RaspiOwnCloud && \
git pull origin main && \
sudo cp -r frontend/* /var/www/raspberrycloud/ && \
sudo cp -r backend/* /opt/raspberrycloud/backend/ && \
sudo chown -R www-data:www-data /var/www/raspberrycloud && \
sudo chown -R www-data:www-data /opt/raspberrycloud && \
sudo systemctl restart raspberrycloud && \
sleep 2 && \
systemctl is-active raspberrycloud && \
echo "âœ… æ›´æ–°å®Œæˆï¼" || echo "âŒ æœåŠ¡å¯åŠ¨å¤±è´¥"
```

---

## ğŸ¯ å¿«é€ŸéªŒè¯æ¸…å•

æ›´æ–°åï¼Œåœ¨æµè§ˆå™¨ä¸­æ£€æŸ¥ï¼š

### 1. æ‰¹é‡æ“ä½œ
- [ ] æ–‡ä»¶å‰é¢æœ‰å¤é€‰æ¡†
- [ ] ç‚¹å‡»"å…¨é€‰"æŒ‰é’®æœ‰æ•ˆ
- [ ] é€‰æ‹©æ–‡ä»¶ååº•éƒ¨å‡ºç°å·¥å…·æ 

### 2. æ‹–æ‹½ä¸Šä¼ 
- [ ] æ‹–æ‹½æ–‡ä»¶æ—¶æ˜¾ç¤ºç´«è‰²é®ç½©
- [ ] æ¾å¼€åè‡ªåŠ¨ä¸Šä¼ 

### 3. äºŒç»´ç åˆ†äº«
- [ ] åˆ›å»ºåˆ†äº«åæ˜¾ç¤ºäºŒç»´ç 
- [ ] äºŒç»´ç å¯ä»¥ä¸‹è½½

### 4. ç½‘æ ¼è§†å›¾
- [ ] å·¥å…·æ æœ‰ç½‘æ ¼/åˆ—è¡¨åˆ‡æ¢æŒ‰é’®
- [ ] ç‚¹å‡»åˆ‡æ¢æœ‰æ•ˆ

### 5. ä¸ªäººä¸­å¿ƒ
- [ ] å³ä¸Šè§’å¤´åƒèœå•æœ‰"è®¾ç½®"é€‰é¡¹
- [ ] ç‚¹å‡»æ‰“å¼€ä¸ªäººä¸­å¿ƒå¯¹è¯æ¡†
- [ ] 5ä¸ªæ ‡ç­¾é¡µå¯ä»¥åˆ‡æ¢

---

## ğŸ› å¦‚æœè¿˜æ˜¯ä¸è¡Œ

### æœ€ç»ˆæ’æŸ¥æ–¹æ³•ï¼š

#### 1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°
```
æŒ‰F12 â†’ Consoleæ ‡ç­¾
æŸ¥çœ‹æ˜¯å¦æœ‰çº¢è‰²é”™è¯¯
```

å¸¸è§é”™è¯¯ï¼š
- `404 Not Found` â†’ æ–‡ä»¶æœªéƒ¨ç½²
- `Uncaught ReferenceError` â†’ JSåŠ è½½å¤±è´¥
- `Failed to load resource` â†’ æ–‡ä»¶è·¯å¾„é”™è¯¯

#### 2. æ£€æŸ¥æ–‡ä»¶å†…å®¹
```bash
# åœ¨æ ‘è“æ´¾ä¸Š
head -20 /var/www/raspberrycloud/js/user-settings.js
```

å¦‚æœæ˜¾ç¤ºå†…å®¹ï¼Œè¯´æ˜æ–‡ä»¶å­˜åœ¨ã€‚

#### 3. æ£€æŸ¥Nginxæ—¥å¿—
```bash
sudo tail -50 /var/log/nginx/error.log
```

#### 4. æ£€æŸ¥åç«¯æ—¥å¿—
```bash
sudo journalctl -u raspberrycloud -n 100
```

---

## ğŸ’¡ ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Ÿ

### åŒæ–‡ä»¶å¤¹éƒ¨ç½²æ¶æ„
```
[Windows PC] 
    â†“ git push
[GitHubä»“åº“]
    â†“ git pull (æ­¥éª¤1ï¼šå¿…é¡»æ‰§è¡Œ)
[æ ‘è“æ´¾ - æ›´æ–°æ–‡ä»¶å¤¹] ~/Desktop/Github/RaspiOwnCloud
    â†“ cp å¤åˆ¶ (æ­¥éª¤2ï¼šquick_update.sh)
[æ ‘è“æ´¾ - ç”Ÿäº§æ–‡ä»¶å¤¹] /var/www/raspberrycloud
```

### é—®é¢˜å¯èƒ½å‡ºåœ¨ï¼š
1. âŒ Windowsæœªæ¨é€ â†’ GitHubä»“åº“æ²¡æœ‰æ–°ä»£ç 
2. âŒ æ ‘è“æ´¾æœªæ‹‰å– â†’ æ›´æ–°æ–‡ä»¶å¤¹æ˜¯æ—§ä»£ç 
3. âŒ å¤åˆ¶è„šæœ¬é—®é¢˜ â†’ ç”Ÿäº§æ–‡ä»¶å¤¹æ²¡æ›´æ–°
4. âŒ æµè§ˆå™¨ç¼“å­˜ â†’ çœ‹åˆ°çš„æ˜¯æ—§é¡µé¢

---

## ğŸ¯ æˆ‘çš„å»ºè®®

### ç°åœ¨ç«‹å³æ‰§è¡Œï¼š

#### åœ¨Windowsä¸Šï¼š
```powershell
cd F:\Github\RaspiOwnCloud
git add .
git commit -m "ç¡®ä¿æ‰€æœ‰æ–°åŠŸèƒ½éƒ½å·²æäº¤"
git push origin main
```

#### åœ¨æ ‘è“æ´¾ä¸Šï¼š
```bash
ssh pi@raspberrypi.local

# å¼ºåˆ¶åŒæ­¥
cd ~/Desktop/Github/RaspiOwnCloud
git fetch origin
git reset --hard origin/main

# è¿è¡Œè¯Šæ–­
bash scripts/diagnose_update.sh

# å¦‚æœè¯Šæ–­æ˜¾ç¤ºæ–‡ä»¶å­˜åœ¨ï¼Œè¿è¡Œæ›´æ–°
bash scripts/quick_update.sh
```

#### åœ¨æµè§ˆå™¨ä¸­ï¼š
1. æŒ‰ `Ctrl + Shift + Delete`
2. é€‰æ‹©"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"
3. ç‚¹å‡»"æ¸…é™¤æ•°æ®"
4. åˆ·æ–°é¡µé¢ï¼ˆF5ï¼‰

---

## âœ… æˆåŠŸæ ‡å¿—

æ›´æ–°æˆåŠŸåï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š

1. **å³ä¸Šè§’** - ç”¨æˆ·èœå•å¯ä»¥æ‰“å¼€è®¾ç½®
2. **å·¥å…·æ ** - æœ‰"å…¨é€‰"æŒ‰é’®å’Œè§†å›¾åˆ‡æ¢æŒ‰é’®
3. **æ–‡ä»¶åˆ—è¡¨** - æ¯ä¸ªæ–‡ä»¶å‰æœ‰å¤é€‰æ¡†
4. **æ‹–æ‹½æ•ˆæœ** - æ‹–æ–‡ä»¶æ—¶æœ‰ç´«è‰²é®ç½©
5. **åˆ†äº«åŠŸèƒ½** - æœ‰äºŒç»´ç æ˜¾ç¤º

å¦‚æœè¿™5ä¸ªéƒ½èƒ½çœ‹åˆ°ï¼Œè¯´æ˜**æ›´æ–°å®Œå…¨æˆåŠŸ**ï¼

---

éœ€è¦æˆ‘å¸®ä½ è¿œç¨‹æ“ä½œå—ï¼ŸæŠŠè¯Šæ–­è„šæœ¬çš„è¾“å‡ºå‘ç»™æˆ‘ï¼Œæˆ‘å¯ä»¥ç²¾å‡†å®šä½é—®é¢˜ï¼

