# 个人中心与设置功能说明

## 🎉 新增功能

### 右上角用户菜单现已完善！

点击右上角的 **用户头像下拉菜单** 可以：
- ⚙️ **设置** - 打开个人中心
- 🚪 **退出登录** - 安全退出系统

---

## 📱 个人中心功能详解

### 如何打开
```
方式1: 点击右上角头像 → 设置
方式2: 点击用户名旁边的下拉按钮 → 设置
```

---

## 🏠 五大功能模块

### 1️⃣ 个人信息

**查看内容**：
- 👤 **用户名** - 你的登录账号（只读）
- 📧 **邮箱** - 可编辑（即将推出）
- 📅 **注册时间** - 账号创建时间
- 🖼️ **头像** - 更换功能即将推出

**界面特点**：
```
┌─────────────────────────┐
│  👤 [大头像]            │
│  [更换头像]             │
├─────────────────────────┤
│ 用户名：admin           │
│ 邮箱：  [可编辑]        │
│ 注册时间：2024-01-01    │
└─────────────────────────┘
```

---

### 2️⃣ 存储管理

**核心功能**：
- 📊 **可视化存储图表** - 环形进度图
- 📈 **存储统计**：
  - 已使用空间
  - 可用空间
  - 总容量
- 📁 **文件类型分布**：
  - 图片占用
  - 视频占用
  - 文档占用
  - 其他文件

**界面布局**：
```
┌──────────────────────────────────┐
│  ╭─────╮   已使用：2.5 GB       │
│  │ 60% │   可  用：1.5 GB       │
│  ╰─────╯   总容量：4.0 GB       │
├──────────────────────────────────┤
│ 📷 图片   50个 · 1.2 GB   48%   │
│ 🎬 视频   10个 · 800 MB   32%   │
│ 📄 文档   30个 · 500 MB   20%   │
└──────────────────────────────────┘
```

**即将推出**：
- 🧹 清理缓存
- 🗑️ 回收站管理

---

### 3️⃣ 安全设置

**修改密码**：
```
步骤：
1. 输入当前密码
2. 输入新密码
3. 确认新密码
4. 点击"修改密码"按钮
5. 修改成功后自动退出，需重新登录
```

**密码要求**：
- ✅ 长度至少6位
- ✅ 两次输入一致
- ✅ 当前密码必须正确

**登录设备管理**：
- 查看当前登录设备
- 多设备管理（即将推出）

**界面示例**：
```
┌──────────────────────────┐
│ 修改密码                 │
├──────────────────────────┤
│ 当前密码：[******]       │
│ 新密码：  [******]       │
│ 确认密码：[******]       │
│ [修改密码]               │
├──────────────────────────┤
│ 登录设备                 │
│ 💻 当前设备  [当前]      │
│    最后活动：刚刚        │
└──────────────────────────┘
```

---

### 4️⃣ 外观设置

**主题模式**：
- ☀️ **浅色主题** - 当前可用
- 🌙 **深色主题** - 即将推出
- 🔄 **跟随系统** - 即将推出

**默认视图**：
- 📃 **列表视图** - 详细信息展示
- 🔲 **网格视图** - 图片预览优化

**文件排序**（即将推出）：
- 按名称
- 按日期
- 按大小
- 按类型

**界面布局**：
```
┌────────────────────────────┐
│ 主题模式                   │
│ [☀️浅色] [🌙深色] [🔄自动] │
├────────────────────────────┤
│ 默认视图                   │
│ [下拉选择：列表视图 ▼]     │
│                            │
│ 更改会立即保存并应用       │
└────────────────────────────┘
```

---

### 5️⃣ 关于

**系统信息**：
- 📦 **版本号**: 1.0.0
- 🍓 **后端框架**: FastAPI + Python
- 🎨 **前端技术**: HTML5 + CSS3 + JavaScript
- 💾 **数据库**: SQLite
- 🌐 **服务器**: Nginx + Uvicorn

**功能特性列表**：
```
✅ 文件上传/下载/预览
✅ 文件夹管理
✅ 文件分享（链接+提取码）
✅ 批量操作（多选+批量下载）
✅ 拖拽上传
✅ 二维码分享
✅ 网格视图切换
✅ 响应式设计（支持移动端）
```

**界面示例**：
```
┌────────────────────────┐
│    🍓                  │
│  RaspberryCloud       │
│   版本 1.0.0          │
│ 基于树莓派的私有云存储  │
├────────────────────────┤
│ 系统信息               │
│ 后端：FastAPI         │
│ 前端：HTML5/CSS3/JS   │
│ 数据库：SQLite        │
└────────────────────────┘
```

---

## 🎯 使用场景

### 场景1：修改密码
```
情况：定期更换密码，提升安全性
步骤：
1. 打开个人中心
2. 点击"安全设置"
3. 输入当前密码和新密码
4. 确认修改
5. 重新登录
```

### 场景2：查看存储使用情况
```
情况：想知道哪些文件占用空间最多
步骤：
1. 打开个人中心
2. 点击"存储管理"
3. 查看环形图和文件类型分布
4. 了解存储使用情况
```

### 场景3：更改默认视图
```
情况：更喜欢网格视图浏览文件
步骤：
1. 打开个人中心
2. 点击"外观设置"
3. 选择"网格视图"
4. 自动保存并应用
```

### 场景4：查看系统信息
```
情况：想了解系统版本和功能
步骤：
1. 打开个人中心
2. 点击"关于"
3. 查看版本号和功能列表
```

---

## 📱 移动端优化

### 适配特性
- ✅ 侧边导航改为顶部标签
- ✅ 存储图表垂直排列
- ✅ 主题选项单列显示
- ✅ 触摸友好的按钮大小

### 移动端布局
```
手机端：
┌────────────────┐
│ [个人] [存储] [安全] [外观] [关于] │ ← 横向滚动标签
├────────────────┤
│                │
│   内容区域     │
│   垂直滚动     │
│                │
└────────────────┘
```

---

## ⚙️ 技术实现

### 前端
- **模块化设计**: `user-settings.js`
- **动态加载**: 首次点击时创建对话框
- **标签切换**: 平滑切换动画
- **数据可视化**: Canvas绘制存储图表

### 后端
- **密码修改API**: `/api/auth/change-password`
- **用户信息API**: `/api/auth/me`
- **支持JSON和Form两种格式**

### 数据流
```
前端请求
   ↓
加载用户信息 (/api/auth/me)
   ↓
加载文件列表 (/api/files/list)
   ↓
统计文件类型
   ↓
绘制图表
   ↓
显示界面
```

---

## 🔒 安全特性

### 密码修改流程
```
1. 验证当前密码 ✓
2. 检查新密码格式 ✓
3. 两次输入一致性 ✓
4. 加密存储新密码 ✓
5. 强制重新登录 ✓
```

### 数据保护
- 🔐 密码哈希存储
- 🔑 Token认证机制
- 🚫 只读敏感信息（用户名、注册时间）

---

## 🐛 常见问题

### Q1: 修改密码后无法登录？
**原因**: 新密码输入错误
**解决**: 
1. 确认Caps Lock未开启
2. 检查密码大小写
3. 联系管理员重置

### Q2: 存储图表不显示？
**原因**: 数据加载中或网络问题
**解决**:
1. 刷新页面
2. 切换到其他标签再回来
3. 检查网络连接

### Q3: 无法保存设置？
**原因**: 部分功能"即将推出"
**解决**:
- 当前仅支持：修改密码、更改默认视图
- 其他功能会在后续版本推出

### Q4: 文件类型统计不准确？
**原因**: 仅统计当前目录文件
**解决**:
- 返回根目录查看完整统计
- 功能改进会在后续版本中完善

---

## 🎨 界面设计亮点

### 1. 左右分栏布局
```
┌────┬──────────────┐
│ 导 │              │
│ 航 │   内容区域    │
│ 栏 │              │
└────┴──────────────┘
清晰的功能分区
```

### 2. 渐变色主题
- 主色调：紫蓝渐变
- 悬停效果：淡紫色背景
- 激活状态：右侧色条

### 3. 图标化导航
- 每个功能配有图标
- 视觉识别更直观
- 移动端友好

### 4. 卡片式布局
- 圆角设计
- 阴影效果
- 悬停动画

---

## 📊 数据展示优化

### 存储图表
- **环形进度图**: 直观展示使用百分比
- **渐变色填充**: 视觉吸引力强
- **居中百分比**: 一眼看清使用率

### 文件类型列表
- **图标分类**: 不同类型不同图标
- **悬停效果**: 轻微右移动画
- **百分比显示**: 快速了解占比

---

## 🚀 即将推出的功能

### 短期计划（1-2周）
- ✨ 头像上传
- ✨ 邮箱修改
- ✨ 深色主题
- ✨ 回收站管理

### 中期计划（1个月）
- ✨ 多设备管理
- ✨ 登录历史
- ✨ 两步验证
- ✨ 缓存清理

### 长期计划（2-3个月）
- ✨ 账号设置导出
- ✨ 活动日志
- ✨ 通知设置
- ✨ API密钥管理

---

## 💡 使用建议

### 最佳实践

#### 1. 定期修改密码
```
建议：每3个月更换一次密码
步骤：
1. 打开安全设置
2. 修改密码
3. 记录在安全的地方
```

#### 2. 监控存储使用
```
建议：每周查看一次存储情况
步骤：
1. 打开存储管理
2. 查看文件类型分布
3. 清理不必要的大文件
```

#### 3. 个性化外观
```
建议：根据使用习惯调整视图
步骤：
1. 打开外观设置
2. 选择适合的默认视图
3. 等待深色主题推出
```

---

## 🎉 总结

### 现在你可以：
- ✅ 查看个人信息和注册时间
- ✅ 可视化查看存储使用情况
- ✅ 了解文件类型分布
- ✅ 随时修改登录密码
- ✅ 自定义默认视图
- ✅ 查看系统版本和功能

### 功能对比

#### 更新前
```
❌ 只能看到用户名
❌ 不知道存储使用情况
❌ 无法修改密码
❌ 没有个人设置
```

#### 更新后
```
✅ 完整的个人中心
✅ 详细的存储统计
✅ 安全的密码修改
✅ 丰富的系统设置
✅ 专业的界面设计
```

---

**🎊 享受全新的个人中心体验！** 🎊

